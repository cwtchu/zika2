<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>å¿ƒåŠ¨ä¹‹å¤œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #2a0845 0%, #612c7a 50%, #1e0035 100%);
            min-height: 100vh;
            color: #e0baff;
            overflow-x: hidden;
        }
        .page {
            padding: 30px;
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
            position: relative;
        }
        .hidden {
            display: none !important;
        }
        h1, h2, h3 {
            color: #f8daff;
            text-shadow: 0 0 10px rgba(248, 200, 255, 0.4);
            font-weight: 600;
        }
        p {
            color: #d0a0ff;
            font-size: 16px;
        }

        /* è¾“å…¥æ¡† */
        .input-group input, .question-input {
            width: 85%;
            max-width: 400px;
            padding: 14px;
            background: rgba(100, 30, 150, 0.3);
            border: 2px solid #9d4edd;
            border-radius: 16px;
            color: #f8eaff;
            font-size: 18px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            outline: none;
        }
        .input-group input::placeholder, .question-input::placeholder {
            color: #bfa0e0;
        }
        .input-group input:focus, .question-input:focus {
            border-color: #e0aaff;
            box-shadow: 0 0 20px rgba(224, 170, 255, 0.4);
            background: rgba(120, 40, 170, 0.35);
        }

        .btn {
            display: inline-block;
            margin-top: 25px;
            padding: 14px 36px;
            background: linear-gradient(45deg, #9d4edd, #c77dff);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 5px 20px rgba(157, 78, 221, 0.4);
        }
        .btn:hover {
            background: linear-gradient(45deg, #c77dff, #e0aaff);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(157, 78, 221, 0.6);
        }
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* å€’è®¡æ—¶ */
        .countdown {
            font-size: 80px;
            font-weight: bold;
            color: #e0aaff;
            margin: 30px 0;
            text-shadow: 0 0 15px rgba(224, 170, 255, 0.6);
            animation: pulse 1s infinite alternate;
        }
        @keyframes pulse {
            from { opacity: 0.8; transform: scale(1); }
            to { opacity: 1; transform: scale(1.05); }
        }

        /* æµ‹è¯•é¢˜å®¹å™¨ */
        .test-container {
            width: 100%;
            background: rgba(70, 20, 100, 0.3);
            backdrop-filter: blur(12px);
            border: 2px solid #9d4edd;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            max-width: 600px;
        }
        .question {
            font-size: 22px;
            margin-bottom: 25px;
            color: #f8daff;
            line-height: 1.5;
        }
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 14px;
            margin: 20px 0;
        }
        .option-btn {
            padding: 16px;
            background: rgba(100, 40, 140, 0.4);
            border: 2px solid #9d4edd;
            border-radius: 16px;
            font-size: 16px;
            color: #e0baff;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
        }
        .option-btn:hover {
            background: rgba(130, 60, 160, 0.5);
            border-color: #c77dff;
        }
        .option-btn.selected {
            background: linear-gradient(45deg, #9d4edd, #b37eee);
            color: white;
            border-color: #e0aaff;
        }
        .next-btn {
            margin-top: 25px;
        }
        .finish-text {
            margin-top: 25px;
            color: #e0aaff;
            font-size: 18px;
            opacity: 0;
            transition: opacity 0.8s;
        }
        .finish-text.show {
            opacity: 1;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(100, 40, 140, 0.5);
            border-radius: 4px;
            margin: 25px 0;
            overflow: hidden;
            border: 1px solid #9d4edd;
        }
        .progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #9d4edd, #c77dff);
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(199, 125, 255, 0.5);
        }

        /* ç»“æœè¯´æ˜é¡µæ ·å¼ */
        .result-explain {
            background: rgba(70, 20, 100, 0.4);
            backdrop-filter: blur(12px);
            border: 2px solid #9d4edd;
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            text-align: left;
        }
        .score-badge {
            display: inline-block;
            padding: 8px 16px;
            background: #c77dff;
            color: white;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .explain-title {
            color: #f8daff;
            font-size: 20px;
            margin: 15px 0 10px;
        }
        .explain-text {
            color: #d0a0ff;
            line-height: 1.6;
        }

        /* æŠ½å¡åŒºåŸŸ */
        .card-area {
            margin-top: 30px;
            width: 100%;
            max-width: 600px;
            background: rgba(70, 20, 100, 0.35);
            backdrop-filter: blur(12px);
            border: 2px solid #9d4edd;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            transition: all 0.5s ease;
        }
        .input-prompt {
            font-size: 16px;
            color: #d0a0ff;
            margin-bottom: 12px;
            text-align: left;
        }

        /* è¯å¡å±•ç¤ºåŒº - å·²ç§»é™¤æ—‹è½¬ */
        .word-tags {
            margin-top: 25px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 12px;
            min-height: 60px;
        }
        .word-tag {
            padding: 14px 20px;
            border-radius: 24px;
            font-size: 18px;
            font-weight: 500;
            color: #333;
            background: #fff;
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            transition: transform 0.3s ease;
            user-select: none;
            white-space: nowrap;
            animation: float-in 0.6s ease forwards;
            transform-origin: center;
        }
        @keyframes float-in {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>

    <!-- é¡µé¢1ï¼šè¾“å…¥åå­— -->
    <div id="page1" class="page">
        <h1>âœ¨ å¼€å¯å¿ƒåŠ¨ä¹‹å¤œ âœ¨</h1>
        <p>è¯·ç”¨å¿ƒå‘¼å”¤æ¢¦è§’çš„åå­—</p>
        <div class="input-group">
            <input type="text" id="dreamCharacter" placeholder="" />
        </div>
        <button class="btn" id="btnStartCall">å¬å”¤æ¢¦è§’</button>
    </div>

    <!-- é¡µé¢2ï¼šå€’è®¡æ—¶ -->
    <div id="page2" class="page hidden">
        <h2>è¯·ç»§ç»­ç”¨å¿ƒå‘¼å”¤: <span id="showDreamName"></span></h2>
        <p>æ­£åœ¨ç­‰å¾…å¯¹æ–¹çš„å›åº”...</p>
        <div class="countdown" id="countdown">5</div>
        <button class="btn" id="btnEnterTest" disabled>è¿›å…¥å¿ƒåŠ¨åå¥½æµ‹è¯•</button>
    </div>

    <!-- é¡µé¢3ï¼šåå¥½æµ‹è¯• -->
    <div id="testPage" class="page hidden">
        <div class="test-container">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <h3 class="question" id="questionContent"></h3>
            <div class="options-container" id="optionsContainer"></div>
            <button class="btn next-btn hidden" id="nextQuestionBtn">ä¸‹ä¸€é¢˜</button>
            <p class="finish-text" id="finishTestText">å¿ƒåŠ¨é¢‘ç‡å·²åŒæ­¥â€¦å³å°†ç”Ÿæˆä¸“å±å›åº”</p>
        </div>
    </div>

    <!-- é¡µé¢4ï¼šæµ‹è¯•ç»“æœè¯´æ˜ -->
    <div id="resultPage" class="page hidden">
        <h2>å¿ƒæ„ä¼ é€’å®Œæˆï¼</h2>
        <div class="result-explain">
            <div class="score-badge" id="finalScoreDisplay"></div>
            <p class="explain-text" id="interpretationText"></p>
        </div>
        <button class="btn" id="btnToCard">è¿›å…¥å¿ƒåŠ¨ä¹‹å¤œâ¤ï¸ğŸ</button>
    </div>

    <!-- é¡µé¢5ï¼šæŠ½å­—å¡ -->
    <div id="page4" class="page hidden">
        <p id="introText1">è¿™æ˜¯å’Œ <span id="showDreamName2"></span> å…±åº¦çš„ç¾å¦™å¿ƒåŠ¨å¤œæ™šï¼ŒçœŸæŒšçš„çˆ±æ„åœ¨ä½ ä»¬ä¹‹é—´ä¸æ–­å‡æ¸©ã€‚</p>
        <p id="introText2">ä¸è¿‡ï¼Œåœ¨ä½ è¡¨è¾¾æ˜ç¡®è®¸å¯ä¹‹å‰ï¼Œä»–åªä¼šç”¨æ·±æƒ…çš„ç›®å…‰å’Œç”œèœœçš„è¯è¯­è¯‰è¯´çˆ±æ„ã€‚</p>

        <div class="card-area">
            <div class="input-prompt">å¦‚æœæƒ³æœ‰è¿›ä¸€æ­¥çš„äº²å¯†ï¼Œè¯·å‘å¯¹æ–¹è¯´å‡ºä½ æ˜ç¡®çš„è¯·æ±‚æˆ–æš§æ˜§çš„æš—ç¤ºï¼Œä»–éƒ½ä¼šå¿ƒé¢†ç¥ä¼šã€‚</div>
            <input type="text" class="question-input" id="questionInput" placeholder="ä¾‹å¦‚:è¯·æŠ±æˆ‘â€¦â€¦" />
            <button class="btn" id="btnDrawCard">ä»–çš„å›åº”</button>
            <div class="word-tags" id="resultContainer"></div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const state = {
                dreamName: '',
                totalScore: 0,
                currentQuestion: 0,
                selectedOption: null
            };
            let lastQuestion = '';

            // DOM å…ƒç´ 
            function getEl(id) { return document.getElementById(id); }
            const page1 = getEl('page1');
            const page2 = getEl('page2');
            const testPage = getEl('testPage');
            const resultPage = getEl('resultPage');
            const page4 = getEl('page4');
            const dreamCharacter = getEl('dreamCharacter');
            const btnStartCall = getEl('btnStartCall');
            const showDreamName = getEl('showDreamName');
            const showDreamName2 = getEl('showDreamName2');
            const countdownEl = getEl('countdown');
            const btnEnterTest = getEl('btnEnterTest');
            const questionContent = getEl('questionContent');
            const optionsContainer = getEl('optionsContainer');
            const nextQuestionBtn = getEl('nextQuestionBtn');
            const finishTestText = getEl('finishTestText');
            const progressFill = getEl('progressFill');
            const finalScoreDisplay = getEl('finalScoreDisplay');
            const interpretationText = getEl('interpretationText');
            const btnToCard = getEl('btnToCard');
            const questionInput = getEl('questionInput');
            const btnDrawCard = getEl('btnDrawCard');
            const resultContainer = getEl('resultContainer');
            const introText1 = getEl('introText1');
            const introText2 = getEl('introText2');

            // ==================== é¡µé¢è·³è½¬ ====================
            btnStartCall.addEventListener('click', function () {
                const name = dreamCharacter.value?.trim();
                if (!name) {
                    alert('è¯·è¾“å…¥æ¢¦è§’çš„åå­—å“¦ï½');
                    return;
                }
                state.dreamName = name;
                showDreamName.textContent = name;
                showDreamName2.textContent = name;
                page1.classList.add('hidden');
                page2.classList.remove('hidden');
                startCountdown();
            });

            function startCountdown() {
                let count = 5;
                const timer = setInterval(() => {
                    countdownEl.textContent = count;
                    count--;
                    if (count < 0) {
                        clearInterval(timer);
                        btnEnterTest.disabled = false;
                    }
                }, 1000);
            }

            btnEnterTest.addEventListener('click', function () {
                if (btnEnterTest.disabled) return;
                page2.classList.add('hidden');
                testPage.classList.remove('hidden');
                loadQuestion();
            });

            // ==================== æµ‹è¯•é¢˜åº“ ====================
            const testQuestions = [
                {
                    question: "ä½ æœŸå¾…çš„ä»Šå¤œå¿ƒåŠ¨ğŸ’—èŠ‚å¥æ˜¯ï¼Ÿ",
                    options: [
                        { text: "ç¼“æ…¢å‡æ¸©ï¼Œå¿ƒæ„ç›¸é€šçš„æƒ…ç»ªæ›´é‡è¦", score: 1 },
                        { text: "ç”±ä½ ä¸»å¯¼ï¼Œæ­¤æ—¶æ­¤åˆ»æ˜¯ä½ çš„ä¸»åœº", score: 3 },
                        { text: "å¼€æ”¾å§¿æ€ï¼ŒåŒæ„å°è¯•æ›´å¤šæœ‰è¶£çš„æ–¹å¼", score: 5 },
                        { text: "æ”¾å¼ƒåæŠ—ï¼Œä»»ä»–å®Œå…¨æŒæ§", score: 7 }
                    ]
                },
                {
                    question: "å“ªç§è¡¨è¾¾çˆ±çš„æ–¹å¼æ›´æ‰“åŠ¨ä½ ï¼Ÿ",
                    options: [
                        { text: "çˆ±è¦å¤§å£°è¡¨ç™½ï¼Œè¡ŒåŠ¨åŠ›åè¶³", score: 5 },
                        { text: "æ€»æœ‰æ¸©æŸ”ä½“è´´çš„è¡ŒåŠ¨ï¼Œå¤„å¤„è®©äººå®‰å¿ƒ", score: 1 },
                        { text: "è§†ä½ ä¸ºå¥³ç¥ï¼Œæ°¸è¿œè‡£æœäºä½ çš„è£™ä¸‹", score: 3 },
                        { text: "å¼ºçƒˆå æœ‰æ¬²ï¼Œæƒ³æŒæ§ä½ çš„ä¸€åˆ‡", score: 7 }
                    ]
                },
                {
                    question: "ä»Šæ™šä½ åçˆ±å“ªç§å‰æˆæ¨¡å¼ï¼Ÿ",
                    options: [
                        { text: "å¤šå¤šå‰æˆï¼Œäº«ç”¨ä»–çš„æ¸©æŸ”æœåŠ¡", score: 1 },
                        { text: "ä½ æ¥ä¸»å¯¼ï¼Œä»Šå¤©ä¸€åˆ‡å¬ä½ çš„", score: 3 },
                        { text: "å¿«ä¹æ¢ç´¢ï¼Œä¸€èµ·å°è¯•æ–°æŠ€æœ¯", score: 5 },
                        { text: "æ— éœ€å‰æˆï¼Œç›®æ ‡æ˜ç¡®ç›´å…¥ä¸»é¢˜", score: 7 }
                    ]
                },
                {
                    question: "ä½ æƒ³å¬å¯¹æ–¹åœ¨å¿ƒåŠ¨ğŸ’—æ—¶åˆ»è¯´ä»€ä¹ˆï¼Ÿ",
                    options: [
                        { text: "å¯¹ä½ æ— é™çˆ±æ„å€¾è¯‰", score: 3 },
                        { text: "æ¸©æŸ”å‘¨åˆ°çš„å®‰æŠš", score: 1 },
                        { text: "åå¤ç¡®è®¤ä½ çš„çœŸå¿ƒ", score: 5 },
                        { text: "ç®€å•ç²—æš´ï¼Œè¯´åˆ°åšåˆ°", score: 7 }
                    ]
                },
                {
                    question: "ä½ ä»Šå¤œå–œæ¬¢ğŸğŸçš„äº²å¯†ç¨‹åº¦æ˜¯ï¼Ÿ",
                    options: [
                        { text: "æ–°æ‰‹ä¸Šè·¯ï¼Œçº¯çˆ±è´´è´´å°±å¥½", score: 1 },
                        { text: "æ¸©æŸ”ä½“è´´çš„å…¨å¥—æµç¨‹", score: 3 },
                        { text: "å°åšæ€¡æƒ…ï¼Œé€‚å½“æƒ…è¶£æ›´ä½³", score: 5 },
                        { text: "æ”¾å¿ƒæŠŠä¸€åˆ‡äº¤ç»™ä»–", score: 7 }
                    ]
                }
            ];

            // ==================== åŠ è½½é¢˜ç›® ====================
            function loadQuestion() {
                if (state.currentQuestion >= testQuestions.length) return;
                const q = testQuestions[state.currentQuestion];
                questionContent.textContent = q.question;
                optionsContainer.innerHTML = '';
                state.selectedOption = null;

                q.options.forEach(opt => {
                    const btn = document.createElement('button');
                    btn.className = 'option-btn';
                    btn.textContent = opt.text;
                    btn.dataset.score = opt.score;
                    btn.addEventListener('click', function () {
                        document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
                        btn.classList.add('selected');
                        state.selectedOption = parseInt(btn.dataset.score);
                    });
                    optionsContainer.appendChild(btn);
                });

                nextQuestionBtn.classList.remove('hidden');
                finishTestText.classList.add('hidden');
                const progress = ((state.currentQuestion + 1) / testQuestions.length) * 100;
                progressFill.style.width = progress + '%';
            }

            nextQuestionBtn.addEventListener('click', function () {
                if (state.selectedOption === null) {
                    alert('è¯·é€‰æ‹©ä¸€ä¸ªé€‰é¡¹å“¦ï½');
                    return;
                }
                state.totalScore += state.selectedOption;
                state.currentQuestion++;
                if (state.currentQuestion < testQuestions.length) {
                    loadQuestion();
                } else {
                    nextQuestionBtn.classList.add('hidden');
                    finishTestText.classList.remove('hidden');
                    setTimeout(() => {
                        testPage.classList.add('hidden');
                        resultPage.classList.remove('hidden');
                        showResultInterpretation();
                    }, 800);
                }
            });

            // ==================== æ˜¾ç¤ºç»“æœ ====================
            function showResultInterpretation() {
                finalScoreDisplay.textContent = `åå¥½å·²ä¼ è¾¾ã€‚`;
                interpretationText.textContent = "ä½ çš„å¿ƒæ„å·²ä¼ é€’ç»™å¯¹æ–¹ï¼Œä¹Ÿè®¸ä»–ä¼šå¦‚ä½ æ‰€æ„¿ï¼Œä¹Ÿè®¸ä»–æœ‰è‡ªå·±çš„æƒ³æ³•â€¦â€¦";
            }

            btnToCard.addEventListener('click', function () {
                resultPage.classList.add('hidden');
                page4.classList.remove('hidden');
            });

            // ==================== é©¬å¡é¾™è‰²ç³» ====================
            const macaronColors = [
                '#FFF5E6', '#FFE6E6', '#F0F7FF', '#E6FFFA', '#F9F4FF',
                '#FFF9E6', '#E6FFED', '#FFEDED', '#F2F9F2', '#FDF5FF'
            ];

            // ==================== è¯åº“ ====================
             const wordLibrary = {
                introverted: {
                    emotion: [  'æ¸©æŸ”', 'æ¸©æŸ”', 'æ¸©æŸ”', 'å‡æœ›', 'å®‰æ…°', 'è¯•æ¢', 'å¾®ç¬‘',  'å¦å®š', 'ç–‘é—®', 'å¿ƒåŠ¨', 'çœ·æ‹', 'å‡æœ›', 'å®‰æ…°', 'å¿è€',  'æ»¡æ„', 'å…‹åˆ¶', 'å¼ºåŠ¿', 'ä¸è¦',  'å¿ƒåŠ¨',  'å–˜æ¯', 'è¿·é†‰', 'é¤è¶³', 'ä¸æ»¡','ç”¨åŠ›', 'æ„ä¹±ç¥è¿·', 'æ‹¥æŠ±æ¸©å­˜', 'äº²äº²', 'ä¸è¦æ‹’ç»', 'æ»¡è¶³',  'æƒ³è¦',  'è¿·æ‹', 'è´´è¿‘','ç»™æˆ‘'],
                    response: [ 'å¥½å­©å­', 'ä½ çœŸæ£’', 'åˆ«æ€•', 'åˆ«å“­ï¼Œæˆ‘åœ¨', 'æˆ‘æ‡‚','åˆ«ç´§å¼ ', 'å¥½æ¹¿', 'çœŸå¯çˆ±', 'æ²¡äº‹çš„','ç›¸ä¿¡æˆ‘', 'æ²¡å…³ç³»çš„', 'æˆ‘ä¸€ç›´éƒ½åœ¨',  'åˆ«é€ƒï¼Œè¿‘ä¸€äº›', 'æŠ±æˆ‘', 'è¯´ä½ çˆ±æˆ‘', 'çœ‹ç€æˆ‘', 'å†è¿‘ä¸€ç‚¹', 'åˆ«åœä¸‹', 'æ±‚ä½ ', 'å¥½è½¯', 'è¯´ä½ è¦æˆ‘', 'å»æˆ‘', 'å¯ä»¥å»è¿™é‡Œå—', 'å†æ”¾æ¾äº›','å¼ å¼€å˜´å·´å«ä½', 'å˜˜', 'ä½ æ˜¯æˆ‘çš„', 'ä¸å‡†é€ƒå¼€æˆ‘','ä¸èˆ’æœå—', 'å†æ·±ä¸€ç‚¹', 'å«æˆ‘çš„åå­—', 'è®©æˆ‘çœ‹çœ‹å¥½å—', 'æ˜¯è¿™é‡Œå—','å¾ˆç´§','å¥½ç¾','æŠ±ç´§æˆ‘æˆ‘æ‰èƒ½æ›´æ·±','çœŸæ˜¯å¥½å­©å­','æ€ä¹ˆæ¹¿æˆè¿™æ ·','æ˜¯ç”œçš„å‘¢','æƒ³è¦å—ï¼Ÿ','ç°åœ¨å¯ä»¥è¿›å»å—ï¼Ÿ'],
                    action: ['æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'è½»å’¬å˜´å”‡', 'å«ä½æŸ”è½¯', 'æ·±æƒ…äº²å»','èƒŒåæ‹¥æŠ±','æŠšæ‘¸è„¸é¢Š', 'å«ä½èˆŒå¤´', 'äº²å»è€³å°–', 'äº²å»é¢å¤´','åæŒ‡ç›¸æ‰£','æŠšæ‘¸å¤§è…¿','æ‚ä½è…°éƒ¨','é«˜æŠ¬èµ·è„šè¸','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡æ…¢æ…¢æ‰“è½¬','ä¿¯ä¸‹èº«å­äº²å»','è§‚å¯Ÿä½ çš„è¡¨æƒ…','èˆ”å¼„æŸ”è½¯','æ‰‹æŒ‡æ·±å…¥','æ‰‹æŒ‡æ‹¨å¼„æ‰æŒ‰','ä¸Šä¸‹æ‘©æŒ²','é¢å¤´ç›¸æŠµ','è½»è½»æ‘©æŒ²','äº²å»ä½ çš„æŒå¿ƒ','äº²å»ä½ çš„è„šè¸','æ¸©æŸ”æ‚è¿›æ€€ä¸­','èä¸ºä¸€ä½“','å·å»','æ„Ÿå—ä½ çš„æŸ”è½¯','å®å¸ç”œèœœ','æ¹¿æ¼‰æ¼‰çš„æ‰‹æŒ‡','æ‰æŒ‰åŠ é€Ÿ','æ¸©æŸ”æŒ‰æ‘©','æŠ±è¿›æ€€é‡Œå®‰æŠš','è½»è½»æ‰æŒ‰','ä¸Šä¸‹æ‘©æŒ²'],
                    intention: ['è¯´ä½ åªçˆ±æˆ‘', 'æ— æ³•æ”¾å¼€ä½ ', 'æˆ‘ä¸€ç›´éƒ½åœ¨', 'æƒ³æ²‰æººäºä½ ', 'ä½ çœŸçš„å¾ˆç¾', 'æƒ³å’Œä½ èä¸ºä¸€ä½“', 'é‡è§ä½ æ˜¯æˆ‘æœ€å¤§çš„å¹¸è¿','æˆ‘çˆ±ä½ ']
                },
                gentle: {
                    emotion: [  'å¾®ç¬‘', 'å‡æœ›', 'å®‰æ…°', 'è¯•æ¢','ä¾æ‹',  'å¿ƒåŠ¨', 'ä¸»äºº', 'å‡æœ›', 'å…³å¿ƒ', 'ä¸»äºº', 'å¿è€','é»˜è®¸',  'æ»¡æ„', 'æ‹’ç»', 'å–˜æ¯', 'è¿·é†‰', 'å–˜æ¯', 'è‡£æœ', 'å¿ƒç—’', 'å“€æ±‚', 'å“€æ±‚','æ²‰æºº',  'æ»¡è¶³',  'æƒ³è¦',  'è¿·æ‹', 'ç»™æˆ‘'],
                    response: [ 'äº²äº²', 'ä¸€åˆ‡å¬ä½ çš„', 'æˆ‘æ‡‚','æˆ‘å¯ä»¥', 'ç«­åŠ›å¿è€', 'çœŸå¯çˆ±', 'æ²¡äº‹çš„','ç›¸ä¿¡ä½ ', 'æ²¡å…³ç³»çš„', 'å¾ˆå¥½',  'æˆ‘çˆ±ä½ ', 'æŠ±æˆ‘', 'è¯´ä½ çˆ±æˆ‘', 'çœ‹ç€æˆ‘', 'è¯´ä½ æƒ³è¦æˆ‘', 'åˆ«åœä¸‹', 'æ±‚ä½ ', 'å¥½è½¯', 'æˆ‘æƒ³è¦ä½ ', 'å»æˆ‘', 'å¯ä»¥å»è¿™é‡Œå—', 'å†æ”¾æ¾äº›','å¿ä¸äº†äº†', 'å¥½èˆ’æœï¼Œç»§ç»­', 'ä½ æ˜¯æˆ‘çš„', 'ä¸å‡†é€ƒå¼€æˆ‘','å¥½èˆ’æœ', 'å†æ·±ä¸€ç‚¹', 'å«æˆ‘çš„åå­—', 'æ‘¸æ‘¸çœ‹', 'å°±æ˜¯è¿™é‡Œ','å¾ˆç´§','å¥½ç¾','å””ï¼Œå¥½æ·±','çœŸæ˜¯å¥½å­©å­','åå¯¹','çœ‹ç€æˆ‘','ç°åœ¨å°±æƒ³è¦','ç°åœ¨å¯ä»¥è¿›å»å—ï¼Ÿ'],
                    action: ['æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'è½»å’¬å˜´å”‡', 'å«ä½æŸ”è½¯', 'æ·±æƒ…äº²å»','èƒŒåæ‹¥æŠ±','æŠšæ‘¸è„¸é¢Š', 'å«ä½èˆŒå¤´', 'äº²å»è€³å°–', 'äº²å»é¢å¤´','åæŒ‡ç›¸æ‰£','æŠšæ‘¸å¤§è…¿','æ‚ä½è…°éƒ¨','é«˜æŠ¬èµ·è„šè¸','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡æ…¢æ…¢æ‰“è½¬','ä¿¯ä¸‹èº«å­äº²å»','è§‚å¯Ÿä½ çš„è¡¨æƒ…','èˆ”å¼„æŸ”è½¯','æ‰‹æŒ‡æ·±å…¥','æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'ç´¢å–äº²å»', 'å«ä½æŸ”è½¯', 'æŠ“ä½åŒæ‰‹', 'å«ä½èˆŒå¤´', 'äº²å»è€³å°–', 'äº²å»é¢å¤´','åæŒ‡ç›¸æ‰£','æŠšæ‘¸å¤§è…¿','æ‚ä½è…°éƒ¨','èººåœ¨ä½ èº«ä¸‹','æŠšæ‘¸è…¿é—´è½¯è‚‰','ä¸ºä½ æœåŠ¡','æŒ‰æ‘©ä½ çš„è…°éƒ¨','è½»è½»æ¢å…¥é£ŸæŒ‡','èˆ”å¼„å°è±†è±†','æ‰‹æŒ‡æ·±å…¥','æ‰‹æŒ‡æ‹¨å¼„æ‰å‹','æ‰‹æŒ‡é€Ÿåº¦åŠ å¿«','å¢åŠ æ‰‹æŒ‡','è¹­ä½ çš„è„–é¢ˆ','æ’å…¥æ›´æ·±','è®¨å¥½åœ°äº²å»','äº²å»ä½ çš„è„šè¸','æŒºèº«æ’å…¥','æ„Ÿå—ä½ çš„æ¹¿çƒ­','å¤§åŠ›æ’å‡»','åå®¢ä¸ºä¸»','æŠ±ä½ åœ¨æ€€ä¸­','å®å¸ç”œèœœ','ä¸¾èµ·æ¹¿æ¼‰æ¼‰çš„æ‰‹æŒ‡','å¿ä¸ä½é‡Šæ”¾'],
                    intention: ['å¯ä¸å¯ä»¥åªçˆ±æˆ‘', 'ä½ æ˜¯æˆ‘çš„ä¸€åˆ‡', 'ä½ æœ‰æ²¡æœ‰å¥½å¥½çˆ±æˆ‘', 'æˆ‘ä¸€ç›´éƒ½åœ¨', 'æˆ‘æ„¿è‡£æœäºä½ ', 'ä½ çœŸçš„å¾ˆç¾', 'æƒ³å’Œä½ èä¸ºä¸€ä½“', 'ä½ æ˜¯æˆ‘çš„å…¨éƒ¨','æˆ‘çˆ±ä½ ']
                },
                joyful: {
                    emotion: [  'æ¸©æŸ”', 'å¾®ç¬‘', 'å¾®ç¬‘', 'å‡æœ›', 'å®‰æ…°', 'å‡æœ›', 'å¿è€',  'æ»¡æ„',  'å¼ºåŠ¿', 'å‹åˆ¶',  'å–˜æ¯', 'è¿·é†‰', 'é¤è¶³', 'è€å¿ƒå“„',  'ç¼ ç»µ','ç”¨åŠ›','æ»¡è¶³',  'æ•…æ„è¯¢é—®',  'è¿·æ‹', 'è´´è¿‘','å¬è¯','å®‰æ…°','æ»¡æ„','è€å¿ƒå“„'],
                    response: [ 'åƒå¾—å¥½æ·±', 'åˆ«æ€•ï¼Œäº¤ç»™æˆ‘', 'å®‰å…¨è¯æ˜¯:æˆ‘çˆ±ä½ ', 'æˆ‘æ‡‚','åˆ«ç´§å¼ ', 'å¥½æ¹¿', 'çœŸå¯çˆ±', 'å†å¤¹ç´§äº›','ç›¸ä¿¡æˆ‘', 'å†æ¥ä¸€æ¬¡ä¹Ÿå¯ä»¥å§', 'æˆ‘ä¸€ç›´éƒ½åœ¨',  'æŒºé«˜ä¸€ç‚¹', 'çœ‹çœ‹é•œå­é‡Œçš„ä½ æœ‰å¤šç¾', 'è¯´ä½ çˆ±æˆ‘', 'çå¼€çœ¼ç›çœ‹ç€æˆ‘', 'æ€ä¹ˆæ¹¿æˆè¿™æ ·', 'å†å¼ å¼€äº›', 'æ±‚æˆ‘', 'å¥½è½¯å¥½é¦™', 'è¯´ä½ è¦æˆ‘ï¼Œå¤§å£°ä¸€ç‚¹', 'å»æˆ‘', 'èˆŒå¤´ä¼¸å‡ºæ¥', 'å†æ”¾æ¾äº›','å¼ å¼€å˜´å·´å«ä½', 'å˜˜', 'ä½ æ˜¯æˆ‘çš„', 'ä¸å‡†é€ƒå¼€æˆ‘','èˆ’æœå—', 'å†æ·±ä¸€ç‚¹', 'å«æˆ‘çš„åå­—', 'åœ¨å®³ç¾å—', 'æ˜¯è¿™é‡Œå—','å¾ˆç´§','å¥½ç¾','æƒ³è¦ä»€ä¹ˆ','çœŸæ˜¯å¥½å­©å­','æ€ä¹ˆæ¹¿æˆè¿™æ ·','æ˜¯ç”œçš„å‘¢','çœ‹ç€æˆ‘','å¤§å£°ä¸€ç‚¹'],
                    action: ['æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'è½»å’¬å˜´å”‡', 'å«ä½æŸ”è½¯', 'æ·±æƒ…äº²å»','èƒŒåæ‹¥æŠ±','æŠšæ‘¸è„¸é¢Š', 'å«ä½èˆŒå¤´', 'äº²å»è€³å°–', 'äº²å»é¢å¤´','åæŒ‡ç›¸æ‰£','æŠšæ‘¸å¤§è…¿','æ‚ä½è…°éƒ¨','é«˜æŠ¬èµ·è„šè¸','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡æ…¢æ…¢æ‰“è½¬','ä¿¯ä¸‹èº«å­äº²å»','è§‚å¯Ÿä½ çš„è¡¨æƒ…','èˆ”å¼„æŸ”è½¯','æ‰‹æŒ‡æ·±å…¥','æ‰“å¼€è·³è›‹', 'äº²å»å˜´å”‡', 'æ…¢æ…¢å¡å…¥è·³è›‹', 'å«ä½ä¹³å¤´', 'è°ƒé«˜éœ‡åŠ¨æ¡£æ¬¡', 'å«ä½ä½ çš„èˆŒå¤´', 'äº²å»è€³å°–', 'æ‹¿å‡ºä¹³å¤¹','æ”¶ç´§ç»³ç»“','æŠšæ‘¸å¤§è…¿','ç¿»è½¬ä½ çš„èº«ä½“','æŠ¬é«˜å°è…¿å‹åœ¨èƒ¸å‰','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡åœ¨ç©´å£æ‰“è½¬','è’™ä½ä½ çš„çœ¼ç›','æ¢å…¥é£ŸæŒ‡','èˆ”å¼„å°è±†è±†','æ‰‹æŒ‡æ·±å…¥æ‹¨å¼„','æ‰‹æŒ‡æ‹¨å¼„æ‰å‹','æ‰‹æŒ‡é€Ÿåº¦åŠ å¿«','å¢åŠ æ‰‹æŒ‡','æ…¢æ…¢å¡å…¥çç ','æ›´æ·±','æ¸©æŸ”äº²å»','æˆ´ä¸Šæ‰‹é“','æŒºèº«æ’å…¥','ç”¨åŠ›è€¸åŠ¨è…°èº«','å¤§åŠ›æ’å‡»','è§£å¼€æ‰£å­','ç»‘ä½æ‰‹è…•','å®å¸ç”œèœœ','ä¸¾èµ·æ¹¿æ¼‰æ¼‰çš„æ‰‹æŒ‡','æ‰æŒ‰æŒ‘å¼„','æ”¾ç½®å‡è§†','æŠ±ä½ å»æµ´å®¤','è½åœ°çª—è¾¹','æ¸©æŸ”äº²å»'],
                    intention: ['è¯´ä½ åªçˆ±æˆ‘', 'ä½ æ˜¯æˆ‘çš„ä¸€åˆ‡', 'ç–¯ç‹‚è¿·æ‹ä½ ', 'æˆ‘ä¸€ç›´éƒ½åœ¨', 'æ°¸è¿œä¸ä¼šæ”¾æ‰‹', 'ä¸ºäº†ä½ çš„å¿«ä¹æˆ‘æ„¿ä»˜å‡ºä¸€åˆ‡', 'æƒ³å’Œä½ èä¸ºä¸€ä½“', 'æƒ³åˆ°è¾¾ä½ çš„æœ€æ·±å¤„','æˆ‘çˆ±ä½ ']
                },
                passionate: {
                    emotion: [  'æ„å¤–æ¸©æŸ”',  'å‡æœ›', 'æ’©æ‹¨', 'è¯•æ¢','å«‰å¦’', 'ä¸è€',  'å¼ºåŠ¿', 'æ‹’ç»', 'å¿ƒåŠ¨', 'æ€¥åˆ‡', 'ç´§ç»·', 'å…³å¿ƒ', 'ç™«ç‹‚', 'å¿è€',  'æ»¡æ„', 'å…‹åˆ¶', 'å¼ºåŠ¿', 'ä¸è¦',  'å¿ƒåŠ¨', 'è´ªæ‹', 'å–˜æ¯', 'è¿·é†‰', 'é¤è¶³', 'ä¸æ»¡', 'çª’æ¯æ·±å»', 'å“„éª—', 'ä¾å', 'å“€æ±‚', 'ç¼ ç»µ','ç”¨åŠ›', 'æ²‰æºº', 'æƒ³åˆ»ä¸‹å°è®°', 'è§£å¼€æ‰£å­', 'æ€¥åˆ‡æŠšæ‘¸', 'ä¸æ»¡è¶³',  'æƒ³è¦',  'æ²‰é»˜', 'åé—®','ç»™æˆ‘'],
                    response: [ 'å¥½å­©å­', 'ä½ çœŸæ£’', 'åˆ«æ€•', 'å“­äº†ï¼Ÿ', 'ä¸ºæˆ‘å¼ å¼€','æƒ³é€ƒï¼Ÿ', 'å¥½æ¹¿', 'çœŸå¯çˆ±', 'ç—›ä¼šè®©ä½ è®°ä½æˆ‘','ç›¸ä¿¡æˆ‘', 'åƒä¸‹æˆ‘çš„å…¨éƒ¨', 'æˆ‘ä¸€ç›´éƒ½åœ¨',  'ä½ ä¸å¯èƒ½é€ƒæ‰', 'å¬è¯ï¼ŒæŠ±ç´§æˆ‘', 'å¿«è¯´ä½ çˆ±æˆ‘', 'çœ‹ç€æˆ‘', 'è¿‡æ¥', 'åˆ«åœä¸‹', 'æ±‚æˆ‘', 'å¥½è½¯', 'è¯´ä½ è¦æˆ‘', 'å»æˆ‘', 'æ•æ„Ÿç‚¹æ˜¯è¿™é‡Œ', 'å†æ”¾æ¾äº›','å¼ å¼€å˜´å·´å«ä½', 'å˜˜', 'ä½ æ˜¯æˆ‘çš„', 'ä¸å‡†é€ƒå¼€æˆ‘','æƒ³è®©æˆ‘æ±‚ä½ ï¼Ÿ', 'å†æ·±ä¸€ç‚¹', 'å«æˆ‘çš„åå­—', 'å¼ å¤§äº›ï¼Œè®©æˆ‘çœ‹çœ‹', 'æ˜¯è¿™é‡Œå—','å—¯ï¼Œå¾ˆç´§','å¥½ç¾','æŠ±ç´§æˆ‘æˆ‘æ‰èƒ½æ›´æ·±','çœŸæ˜¯å¥½å­©å­','æ€ä¹ˆæ¹¿æˆè¿™æ ·','æ˜¯ç”œçš„å‘¢','æƒ³è¦å—ï¼Ÿ','ç°åœ¨è¦è¿›å»äº†'],
                    action: ['æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'è½»å’¬å˜´å”‡', 'å«ä½æŸ”è½¯', 'æ·±æƒ…äº²å»','èƒŒåæ‹¥æŠ±','æŠšæ‘¸è„¸é¢Š', 'å«ä½èˆŒå¤´', 'äº²å»è€³å°–', 'äº²å»é¢å¤´','åæŒ‡ç›¸æ‰£','æŠšæ‘¸å¤§è…¿','æ‚ä½è…°éƒ¨','é«˜æŠ¬èµ·è„šè¸','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡æ…¢æ…¢æ‰“è½¬','ä¿¯ä¸‹èº«å­äº²å»','è§‚å¯Ÿä½ çš„è¡¨æƒ…','èˆ”å¼„æŸ”è½¯','æ‰‹æŒ‡æ·±å…¥','æŠšæ‘¸è„¸åº', 'äº²å»å˜´å”‡', 'è½»å’¬å˜´å”‡', 'å«ä½ä¹³å¤´', 'æŠšæ‘¸èƒ¸éƒ¨', 'å«ä½ä½ çš„èˆŒå¤´', 'å’¬ä½è€³å‚', 'æ‹½è¿›æ€€é‡Œ','æ”¥ç´§ä½ çš„æ‰‹è…•','æŠšæ‘¸å¤§è…¿','ç”¨åŠ›æ‚ä½è…°éƒ¨','é«˜æŠ¬èµ·è„šè¸','æŠšæ‘¸è…¿é—´è½¯è‚‰','æ‰‹æŒ‡åœ¨ç©´å£æ‰“è½¬','é¼»å°–é¡¶ä½å°è±†','è½»è½»æ¢å…¥é£ŸæŒ‡','èˆ”å¼„å°è±†è±†','æ¸©æŸ”äº²å»','ç—´è¿·äº²å»','æ‰‹æŒ‡æ·±å…¥','ç¿»èº«å‹ä¸Š','æ‰‹æŒ‡æ‹¨å¼„æ‰å‹','æ‰‹æŒ‡é€Ÿåº¦åŠ å¿«','å¢åŠ æ‰‹æŒ‡','æ‰©å¼ ç©´å£','æ’å…¥æ›´æ·±','æ’å…¥å¾—æ›´æ·±','äº²å»ä½ çš„è„šè¸','æŒºèº«æ’å…¥','ç”¨åŠ›è€¸åŠ¨è…°èº«','å¤§åŠ›æ’å‡»','å‰§çƒˆæ’å‡»','èƒŒåæ‹¥ç´§','å®å¸ç”œèœœæ±æ°´','ä¸¾èµ·æ¹¿æ¼‰æ¼‰çš„æ‰‹æŒ‡','æ‰æŒ‰æ‘©æŒ²','æŠ±è¿›æ€€ä¸­å®‰æ…°','æ‹­å»æ³ªæ°´','äº²å»æ³ªæ°´'],
                    intention: ['è¯´ä½ åªçˆ±æˆ‘', 'ä½ æ˜¯æˆ‘çš„ä¸€åˆ‡', 'æ— æ³•æ”¾å¼€ä½ ', 'æˆ‘ä¸€ç›´éƒ½åœ¨', 'æƒ³æ²‰æººäºä½ ', 'ä¸ä¼šè®©ä½ é€ƒç¦»æˆ‘', 'æƒ³è¦ä½ å½»åº•å±äºæˆ‘', 'æƒ³åˆ°è¾¾ä½ çš„æœ€æ·±å¤„','æˆ‘çˆ±ä½ ']
                 }
            };
            function getWordGroup(score) {
                if (score <= 20) return wordLibrary.introverted;
                if (score <= 25) return wordLibrary.gentle;
                if (score <= 30) return wordLibrary.joyful;
                return wordLibrary.passionate;
            }

            function pickWord(arr) {
                return arr[Math.floor(Math.random() * arr.length)];
            }

            function shuffleArray(array) {
                const arr = [...array];
                for (let i = arr.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [arr[i], arr[j]] = [arr[j], arr[i]];
                }
                return arr;
            }

            // ==================== æŠ½å¡é€»è¾‘ ====================
            btnDrawCard.addEventListener('click', function () {
                const input = questionInput?.value?.trim();
                if (input) lastQuestion = input;
                if (!lastQuestion) {
                    alert('è¯·å…ˆè¯´äº›ä»€ä¹ˆå§ï½');
                    return;
                }

                // éšè—ä»‹ç»æ–‡å­—
                introText1.style.display = 'none';
                introText2.style.display = 'none';
                document.querySelector('.input-prompt').style.display = 'none';

                const group = getWordGroup(state.totalScore);
                let words = [
                    pickWord(group.emotion),
                    pickWord(group.response),
                    pickWord(group.action)
                ];

                if (Math.random() < 0.2) {
                    words.push(pickWord(group.intention));
                }

                words = shuffleArray(words);
                resultContainer.innerHTML = '';

                words.forEach((word, index) => {
                    const tag = document.createElement('div');
                    tag.className = 'word-tag';
                    tag.textContent = word;

                    // éšæœºèƒŒæ™¯è‰²
                    const bgColor = macaronColors[Math.floor(Math.random() * macaronColors.length)];
                    tag.style.backgroundColor = bgColor;
                    tag.style.boxShadow = `0 4px 12px rgba(0,0,0,0.1)`;
                    tag.style.border = '1px solid rgba(255,255,255,0.5)';

                    // åŠ¨ç”»å»¶è¿Ÿ
                    tag.style.animationDelay = `${index * 0.1}s`;

                    // ç‚¹å‡»åé¦ˆ
                    tag.addEventListener('click', () => {
                        tag.style.transform = 'scale(0.95)';
                        setTimeout(() => tag.style.transform = 'scale(1)', 150);
                    });

                    resultContainer.appendChild(tag);
                });

                // æŒ‰é’®æ–‡å­—åˆ‡æ¢
                btnDrawCard.textContent = 'ä»–çš„å›åº”';
                setTimeout(() => {
                    btnDrawCard.textContent = 'ç‚¹å‡»ç»§ç»­å¿ƒåŠ¨ğŸ’—';
                }, 3000);
            });
        });
    </script>
</body>
</html>
